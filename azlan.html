
<html>
<head>
	<title></title>

	<script type="text/javascript">

		var recording = false;
		var start_recording;
		var end_recording;
		var keystroke_events = []


		function record(){
			// Get the checkbox
		  var checkBox = document.getElementById("recording");
		  // Get the output text
		  var text = document.getElementById("text");

		  // If the checkbox is checked, display the output text
		  if (checkBox.checked == true){
		    text.innerHTML = "Recording";
		    recording = true;
		    keystroke_events.push({key: 'start', timeStamp: new Date().getTime(),
			delay: 0
			});
		    start_recording = new Date().getTime();
		  } else {
		    text.innerHTML = "Start recording";
		    recording = false;
		    keystroke_events.push(
		    	{key: 'end', timeStamp: new Date().getTime(),
				delay: new Date().getTime() - start_recording
				});
		    end_recording = new Date().getTime();
		  }
		};


		

		document.onkeydown = function (e) {

			if(recording){
  				keystroke_events.push(
  					{
  						key: e.keyCode, 
  						timeStamp: new Date().getTime(),
  						delay: new Date().getTime() - start_recording
  				});
  			}
		};

		function show(){
			var div = document.getElementById('show_div')
			for(i = 0; i<keystroke_events.length; i++){
				div.innerHTML += keystroke_events[i].key+
				': '+
				keystroke_events[i].timeStamp+' delay: '+
				keystroke_events[i].delay+
				'<br/>';
			}
		}

		function log(){
			
			for(i = 0; i<keystroke_events.length; i++){	
				let key = keystroke_events[i].key;
				let delay = keystroke_events[i].delay
				setTimeout(function(){
					//console.log(keystroke_events);
					console.log(key);
				}, delay);
			}
		}
	</script>

</head>
<body>

<input type="checkbox" id='recording' name="recording" onclick="record()">
	<p id='text'> Start recording</p>
</input>

<button id='saved_keys' onclick="show()">Show</button>
<button id='log' onclick="log()">Log</button>

<div id='show_div'></div>


</body>
</html>